/*
 * proxy-server.c
 *
 *  Created on: May 4, 2015
 *      Author: mjwtom
 */


#include <stdio.h>
#include <stdlib.h>

#include "../include/config.h"
#include "../include/network.h"

int main(int argc, char * argv[]) {
	short port;
	char * recipe_filename;
	short dedupe_server_ports[MAX_DEDUPE_NODE];
	int dedupe_server_fds[MAX_DEDUPE_NODE];
	int dedupe_server_number;
	int fd;
	int i;
	//skip the program name
	argc --;
	argv ++;

	port = PROXY_SERVER_PORT;
	recipe_filename = *argv;

	argc --;
	argv ++;
	i = 0;
	while(argc > 0)
	{
		dedupe_server_ports[i] = atoi(*argv);
		i ++;
		argc --;
		argv ++;
	}
	dedupe_server_number = i;

	fd = get_server_socket(port);
	if(fd == -1)
	{
		printf("Error to get server socket");
		return -1;
	}
	/*end of transfer arguments*/
	return EXIT_SUCCESS;
}
